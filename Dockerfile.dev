FROM alpine:3.7

VOLUME /app/src
WORKDIR /app/src/

RUN \
  apk update && \
  apk add \
    python3=3.6.3-r9 postgresql-dev=10.2-r0 gcc=6.4.0-r5 \
    python3-dev=3.6.3-r9 libc-dev=0.7.1-r0 libffi-dev=3.2.1-r4

ENV MJOE_JWT_PRIVATE_KEY LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBMWwybWhFS2htSjBTV3lORnlLQ3A1U3RHZnA1K1pIdUpEbkFGSkl2UzlSaENlTHN3ClZDZ1NHSFhaa3IwYURKc0tocE5RSVJ5bkpwNDRxQUdJVUlsWUVrUTJvQlJJcWxHOTdLaExON2V0Z1dmOFlPNlYKS3JMQnhxemN5RktoSlM3WUpzZGZuUWRYVllPZTVZNzVIR0thZ3ZyY3QwRmdIRlA1ZjVFY0lVVEo2OXB5VVEwagpOVVdTa01FSENnd3hGQ3F5cmt3L0NxR2RURE9FSWJ3bm8rMmEzN3JjQngzbjVNdnRzbVM5UFpKOWtqYmZxeUNHCll2djBSWmc5Y283ZXFodTRJcDA0UTQvUGc4a2hwRklVQVJySmRtWmF2MnhBZHJrcGRQRk5ZYm1Od0FBckhzczEKczdndEs3NmJ6K0hyOUE5a0plOWd6TVVKRzNkNGdSSEhwOW40S3FaUy91ZU9mZ3kzOG1kVWJCTHAzakdnTTcreQp5Y2M0ckZBMUFHcmtobnQ4VHRsbTQvQkFtdW5tYiswT1VPZWpEb2xQMEp2NjdFbWpLUlJtY0lwNU9xNEIrMUtTCmkyNmprMnpWWGZCUTBVM3dsay9peXNuUXN3M2VUYnRtK051aEVrV0tCa1cvUzNkMHJ0YVRQaG5wNFM0SkNSQTIKRDBDbDBIUnQ3MVZXSnR5Q3FsV0s0dEFieXZTaVA0Wm9xb0g3M0EwejNLa0cySVQ1bEUxYm1WeEU3dUJyTk01cgphUDgrSWJ0NlNjMFhoSkxrY0xEYlgvLzYwSzNNTGdhSHpjTUJtTkdhVncvWWxXRzJtUGRha3ZISjNvVnZGem42CmF4UTYrTlkwMUxLNFVUelJrRTJPd3VocERRQXZHWHpqWWxiRmdrcHhVOEFlaG44R1BoVEtmUnpDZW8wQ0F3RUEKQVFLQ0FnRUF1enlqaEdTYXR5MkM2ZjMrSndaR1B6ZzBZOFpXU2JncGQyWGE2QmdGVkRVellqYkdPTXVqT3FBOQpRVkZRM20vUm1zZ3pOaWpMeXd4cUdqejBicnY0SkVSV25pMzVabUx0akRkWE03eUluVDVSait6MGQ0NFplVXBsCnNjZVNuMkt5US9UakM4cHN1dkd6S1hsZkZ5NzlIS2kzZm8xb3dIV011S0xydWhkV2MxNmplUzRMY2ExcUhtdXIKbFZnZXlpbWRWbWFjcmRHS0RoUDFObTRkQmE4MUZuUWxXVVlDMWJKVjFQcnUzRWdHekY2SHNQWkF5MWFjL3VqQgp5ejBGT2ZucU5MbTBlamF6bjcxZldDS2svRzRFU0JtUTdDQkdraXliREZ6MEpRYW96R3FaUDFWcGU2ZkVOTEJSCmNoczRPRDMxVUxrc2lNOFZiRnRHOHgydmtXbnV1dUM4OTRVN3JNQWRUSHBaYW9xdkxsR3pEZUNTY2lEdUgreHEKNUdQc1h3dWcvME5IUWZxVzRwNEZ3UVpwZDdCKzZkYTdGVEtpUWZtTHpnZXc0UmFQRkJ5eTltdWlzK1J3aTVaVQorQmFBS2xseTl1SjhwV1ZMTDVZUDFJcHIybG50QVZ5QkJhQ05IdG9EQlhSZnR4bVpFMzNRMFR3YVR6ZWhjQ1FpCmYxZENEalFsM24xbTRiWWR6bkhjcWtTV0xVV3dqNmJXWVBwQ21UQ1psUTQ5UE96T3lRUHpRTlFDeVI5VWFsY3YKTnpkV3VnM2dnT29yTElJV3hBZCt2dVRWRm4rcHArbzRKRnFwL0RaVlEyVzNPcCtCUHBXeE8yN2sveW11UkQybwpWUVJkME4xVUk5U2pUbW9nbERFQWQ4L3pWMzBQUVZTNzFTcDN0QlRLd2c0R2ptTVJ0YUVDZ2dFQkFPdVFha2xYCnRWZU15bDUwTnV5Tm9IbzdnZCt6OVVabVZFaS9aNTZ1MEh5Z2tpOWpNMkJXVnJvVlliR3NGVjZOOFJ0R3Y3dVQKYm1aRktDZ3N5aE5BZThHYThsYi9yUHJ2MEJRY09oMzhMUGhnWkJlMXJ6YWxHckc2RnhuN0NmZ3dHUjlJeGJuWQpXNFdDLytTR21NZTFiSmJEdG9RMXNkMStvZXpQd1dNVXJMdGc4OGZFd0ZBV3M3NzE0KzcxQ3FyWVdCdWNZeEg0CmxlakF6cXBtY1R6REIvN1IwZENBUzVWQVV2Mm1aVkFaU3RlMm1rdWc4dmtVd25mNHlNdGNheEZLZWtyQU5PdVUKbFF6YUlFanl5NXBWNHd1ZnR5eGp5YXNJSnFaTnBrZjcyQTZaWlJBK0sra1IzYlF3djc4c2tyRTFFOEJRTlZDQgpEL0VCT3VJR1N5UGpIdGtDZ2dFQkFPajJjcERxMmVyaUxVOFZzeHVjU0UxeU5pcnQ5bUgwSXR5VXduODQvQlFzCkorZkVwMFl3Q1IrVG1DMzNERHZMM1NsMnp3TUh1Z05GeU1YRS9HYWNmbytpMWhpRVdaWjlPOTgxSkdWN1JleVQKN2M2SEpwZzFNNiticUY2MFFndDVlVG0xQTNNZ29GcDZHc2Z2TFRUVXVWTDFCa2lRTVUwT3dYM01jMmkyYjNyMAphb3N4SGdsd0xKRFRDNzZYREl1Ny9nVEFGQnYvUWpCZ1orYWNkL0pOMmVaVmdCQndlb21QLytSeVlsbXVYbXNICjYwQW1MV2pGVFFWRzU3bnJhZ3NITm8xQmh2YUVzMXdUd01YS3dDYk5EZEluYXdsQXdYdDAyVERjckZZa2hZdWgKSTRmT2w4QlQ3Rkd6bVdRNGthYmQ0aWlQT1ZiVXVTRXZqV2xWUGxTV1VOVUNnZ0VBUU96Unpwc2srUmR0NDNDbQpmclplUjdKRkRuSWNKU1lwRHMvcWNGc0FUWWs0SVdWM0VKTmJYZmhzcjdxZFBTMWtDYitMTXRqa3NiMVgzeExSCk0xTXZpT0g2N3kyUzhLck9MK3pEdStYNFF4RFdKWTdHMXduVWZLMnNsbFdSbnQwcTMydUFTOE90SGZSSU1TVkQKMEs5WldZaGhzcmpWNkJWeDdjSXBLL1RUMHVWYTYzRjRDOXJsK2JqdDlMdUhFQ1dHeXoxa05Oek4vSk8vb2ttUAo1azVlMHNYanpWSy9Ba2p6VnNQWTRxWEY4Z1I3TEdNVTlML2JCWlFGUzcrU0p2YmZFK0U3OUw1RUFvSFFLaXI1CklQV1JHWEFRM1dRM2ZqTkY2OG8xRFZ3RlphaXpxVEZwaXRpSXdaUTZGU2ZrMm9DbGkvalBhUHZaZC9SOTFUUWsKMjZSS3FRS0NBUUVBc0lBUHV0WUVOcDRYLytRTDZDNVc1VDVUNWVDV25BNHczM2hoaDZ3djZFU3dFenYrRkFKTwoxenFtd0tSOUEwem9pZ0syd3EvMjhZWE1vSEluWE1MU2JKYk5xSk9Wb0p2UFljUk1pQXFHcHNCSkd3RndiejlYCm9vUEhZOEVrakxjQzdvTERVMVZ6eURqYzAzL1ZlMEowQ25NVHlLUmVoZWhaRnF0eEFQTy9zS00vbWFlai96aWEKdXpyNm1mS3RFYTFqdmt1Y3NMMkxjMFdIVXNSWGFDQXRxQUk5WGJjcVQ5RG02amp6Wk1qa1Jpa2d4bUJtWlF1ZQoyQkdwZlVYcitPRUZKcTV2eDVRd28rRmZXenZLcTFzT1RwdUl6K0RjOW1GSU1HbndzKzlGc3MxcU12bUdKYlF2CnhwTFE4NHFjWjVXU1JIS0cyYytmVjVKRWpIcUdGK1l1NVFLQ0FRQUlsa1kwbVF0alhLUGxEbnpFTkNQb0ZuTUMKSC9PUUtUYWszdXl3d0tPV1Evb3R3cVBEWWptMlRvTGR1cjNuc004OWlobWtPL3FzVVVDbzZadXhDZEpRZEVkZwo4WEd3U1M5N0IrbmZYUjV3OXZndVo1R29SdnRRVzU1YW5ZKzlFUWFkN1NRQWp2bkVjd3BhRFVTN2p5YkIxUXNDCmVmVXF4and6ZjJLQ2h6TWN0OVZ0UUhOQUtENi9jcCtYazFLNDRNcnNXMHl6dW4ycjJMK0FoUkF1eWp4ODZuLzYKcU9VNHB3bS9ON0RWc1JFeDkyVVRyc3k0WjVPSGZ4WGRhZFZnRTdXK2IwUEUrd3RFUWpHUm9NNHdPK3lyeVE5VQpqRTcrV1piMEorSjRlaENKNnRTeXZDMUdWNUxqckpqNy9QNFdmQkFnRXJLelNiWmpoY3dGekJuekk3ZkoKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
ENV MJOE_JWT_PUBLIC_KEY LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUExbDJtaEVLaG1KMFNXeU5GeUtDcAo1U3RHZnA1K1pIdUpEbkFGSkl2UzlSaENlTHN3VkNnU0dIWFprcjBhREpzS2hwTlFJUnluSnA0NHFBR0lVSWxZCkVrUTJvQlJJcWxHOTdLaExON2V0Z1dmOFlPNlZLckxCeHF6Y3lGS2hKUzdZSnNkZm5RZFhWWU9lNVk3NUhHS2EKZ3ZyY3QwRmdIRlA1ZjVFY0lVVEo2OXB5VVEwak5VV1NrTUVIQ2d3eEZDcXlya3cvQ3FHZFRET0VJYndubysyYQozN3JjQngzbjVNdnRzbVM5UFpKOWtqYmZxeUNHWXZ2MFJaZzljbzdlcWh1NElwMDRRNC9QZzhraHBGSVVBUnJKCmRtWmF2MnhBZHJrcGRQRk5ZYm1Od0FBckhzczFzN2d0Szc2YnorSHI5QTlrSmU5Z3pNVUpHM2Q0Z1JISHA5bjQKS3FaUy91ZU9mZ3kzOG1kVWJCTHAzakdnTTcreXljYzRyRkExQUdya2hudDhUdGxtNC9CQW11bm1iKzBPVU9lagpEb2xQMEp2NjdFbWpLUlJtY0lwNU9xNEIrMUtTaTI2amsyelZYZkJRMFUzd2xrL2l5c25Rc3czZVRidG0rTnVoCkVrV0tCa1cvUzNkMHJ0YVRQaG5wNFM0SkNSQTJEMENsMEhSdDcxVldKdHlDcWxXSzR0QWJ5dlNpUDRab3FvSDcKM0EwejNLa0cySVQ1bEUxYm1WeEU3dUJyTk01cmFQOCtJYnQ2U2MwWGhKTGtjTERiWC8vNjBLM01MZ2FIemNNQgptTkdhVncvWWxXRzJtUGRha3ZISjNvVnZGem42YXhRNitOWTAxTEs0VVR6UmtFMk93dWhwRFFBdkdYempZbGJGCmdrcHhVOEFlaG44R1BoVEtmUnpDZW8wQ0F3RUFBUT09Ci0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLQo=

COPY ./src/requirements.txt /tmp/requirements.txt
RUN pip3 install -r /tmp/requirements.txt

CMD ["python3", "manage.py", "runserver", "0.0.0.0:8000"]
